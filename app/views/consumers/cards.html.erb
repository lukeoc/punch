<div class="row" ng-app="app" ng-controller="consumersCtrl" ng-init="setup(<%= @consumer.id %>)">

  <!-- SIDE BAR START -->
  <div class="red lighten-4 col s12 m12 l3" ng-class="functionName(2)" ng-if="showCardList">
    <div class="input-field">
      <input ng-model="cardFilter" id="search" type="search" required>
      <label class="label-icon" for="search"><i class="material-icons">search</i></label>
      <i class="material-icons">close</i>
    </div>

    <div class="row" ng-repeat="card in cards | filter: cardFilter" class="collapsible" data-collapsible="accordion" >
      <div class="collapsible-header card-panel hoverable container col s12 red lighten-5" ng-click="showCard(card)">
        <div>{{card.merchant_name}}</div>
        <div>level: {{card.level}}</div>
        <div>total: ${{card.total}} / ${{card.reward_threshold}}</div>
        <div class="reward-name red">{{card.reward_name}}</div>
<!-- collapse test -->

<ul class="collapsible" data-collapsible="accordion">
                 <li>
                   <div class="collapsible-header"><i class="material-icons">filter_drama</i>First</div>
                   <div class="collapsible-body"><span>Lorem ipsum dolor sit amet.</span></div>
                 </li>
                 <li>
                   <div class="collapsible-header"><i class="material-icons">place</i>Second</div>
                   <div class="collapsible-body"><span>Lorem ipsum dolor sit amet.</span></div>
                 </li>
                 <li>
                   <div class="collapsible-header"><i class="material-icons">whatshot</i>Third</div>
                   <div class="collapsible-body"><span>Lorem ipsum dolor sit amet.</span></div>
                 </li>
               </ul>
                
      </div>
    </div>    
  </div>
  <!-- SIDE BAR END -->

  <!-- MAIN CONTENT START -->
  <div class="col s12 m12 l9" ng-if="showCardInfo">
    <div class ="container">
      <div>{{card.merchant_name}}</div>
      <div>level: {{card.level}}</div>
      <div>total: ${{card.total}} / ${{card.reward_threshold}}</div>
      <div>reward: {{card.reward_name}}</div>
      <table class="striped">
        <thead>
          <tr>
            <th data-field="date">date</th>
            <th data-field="amount">amount</th>
          </tr>
        </thead>

        <tbody>
          <tr ng-repeat="transaction in transactions">
            <td>{{transaction.created_at | date:'medium'}}</td>
            <td>${{transaction.amount | number:2}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <!-- MAIN CONTENT END -->
</div>